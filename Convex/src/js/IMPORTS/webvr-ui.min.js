!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webvrui=e()}}(function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new r,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},s.prototype.emit=function(e,t,n,r,i,s){var o=a?a+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,s),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(f-1);d<f;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){var r=new i(t,n||this),s=a?a+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},s.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),s=a?a+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,i){var s=a?a+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[s]);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[s]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=a,s.EventEmitter=s,void 0!==t&&(t.exports=s)},{}],2:[function(e,t,n){!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,s={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)s[n[0][r]]=t[r];return s}return!1}(),s={request:function(t){var n=i.requestFullscreen;t=t||e.documentElement,/5\.1[.\d]* Safari/.test(navigator.userAgent)?t[n]():t[n](r&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){e[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(t){e.addEventListener(i.fullscreenchange,t,!1)},onerror:function(t){e.addEventListener(i.fullscreenerror,t,!1)},raw:i};i?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),n?t.exports=s:window.screenfull=s):n?t.exports=!1:window.screenfull=!1}()},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e("./enter-vr-button")),s=r(e("./states"));"undefined"!=typeof AFRAME&&AFRAME&&AFRAME.registerComponent("webvr-ui",{dependencies:["canvas"],schema:{enabled:{type:"boolean",default:!0},color:{type:"string",default:"white"},background:{type:"string",default:"black"},corners:{type:"string",default:"square"},disabledOpacity:{type:"number",default:.5},textEnterVRTitle:{type:"string"},textExitVRTitle:{type:"string"},textVRNotFoundTitle:{type:"string"}},init:function(){},update:function(){var e=document.querySelector("a-scene");if(e.setAttribute("vr-mode-ui",{enabled:!this.data.enabled}),this.data.enabled){if(this.enterVREl)return;var t={color:this.data.color,background:this.data.background,corners:this.data.corners,disabledOpacity:this.data.disabledOpacity,textEnterVRTitle:this.data.textEnterVRTitle,textExitVRTitle:this.data.textExitVRTitle,textVRNotFoundTitle:this.data.textVRNotFoundTitle,onRequestStateChange:function(t){return t==s.default.PRESENTING?e.enterVR():e.exitVR(),!1}},n=this.enterVR=new i.default(e.canvas,t);this.enterVREl=n.domElement,document.body.appendChild(n.domElement),n.domElement.style.position="absolute",n.domElement.style.bottom="10px",n.domElement.style.left="50%",n.domElement.style.transform="translate(-50%, -50%)",n.domElement.style.textAlign="center"}else this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())},remove:function(){this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())}})},{"./enter-vr-button":5,"./states":7}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={},i=n.injectCSS=function(e){var t=document.createElement("style");t.innerHTML=e;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild)},s=(n.createDefaultView=function(e){var t=e.height/3;e.injectCSS&&(r[e.cssprefix]||(i(a(e,t)),r[e.cssprefix]=!0));var n=document.createElement("div");return n.innerHTML=function(e,t){var n=.8*t;return'<button class="'+e+'-button">\n          <div class="'+e+'-title"></div>\n          <div class="'+e+'-logo" >'+(s(e,n)+o(e,n))+"</div>\n        </button>"}(e.cssprefix,t),n.firstChild},n.createVRIcon=function(e,t){var n=document.createElement("div");return n.innerHTML=s(e,t),n.firstChild},n.createNoVRIcon=function(e,t){var n=document.createElement("div");return n.innerHTML=o(e,t),n.firstChild},function(e,t){return'<svg class="'+e+'-svg" version="1.1" x="0px" y="0px" \n        width="'+28/18*t+'px" height="'+t+'px" viewBox="0 0 28 18" xml:space="preserve">\n        <path d="M26.8,1.1C26.1,0.4,25.1,0,24.2,0H3.4c-1,0-1.7,0.4-2.4,1.1C0.3,1.7,0,2.7,0,3.6v10.7\n        c0,1,0.3,1.9,0.9,2.6C1.6,17.6,2.4,18,3.4,18h5c0.7,0,1.3-0.2,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l\n        1.5-2.6C13.2,13.1,13,13,14,13v0h-0.2 h0c0.3,0,0.7,0.1,0.8,0.5l1.4,2.6c0.3,0.6,0.8,1.1,1.3,\n        1.4c0.6,0.3,1.2,0.5,1.8,0.5h5c1,0,2-0.4,2.7-1.1c0.7-0.7,1.2-1.6,1.2-2.6 V3.6C28,2.7,27.5,\n        1.7,26.8,1.1z M7.4,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8c1.6,0,2.8,1.3,2.8,2.8\n        C10.2,10.5,8.9,11.8,7.4,11.8z M20.1,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8C21.7\n        ,6.2,23,7.4,23,9 C23,10.5,21.7,11.8,20.1,11.8z"/>\n    </svg>'}),o=function(e,t){return'<svg class="'+e+'-svg-error" x="0px" y="0px" \n        width="'+28/18*t+'px" height="'+28/18*t+'px" viewBox="0 0 28 28" xml:space="preserve">\n        <path d="M17.6,13.4c0-0.2-0.1-0.4-0.1-0.6c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8\n        c-0.2,0-0.4,0-0.6-0.1l5.9,5.9c0.5-0.2,0.9-0.4,1.3-0.8\n        c0.7-0.7,1.1-1.6,1.1-2.5V7.4c0-1-0.4-1.9-1.1-2.5c-0.7-0.7-1.6-1-2.5-1\n        H8.1 L17.6,13.4z"/>\n        <path d="M10.1,14.2c-0.5,0.9-1.4,1.4-2.4,1.4c-1.6,0-2.8-1.3-2.8-2.8c0-1.1,0.6-2,1.4-2.5\n        L0.9,5.1 C0.3,5.7,0,6.6,0,7.5v10.7c0,1,0.4,1.8,1.1,2.5c0.7,0.7,1.6,1,2.5,1\n        h5c0.7,0,1.3-0.1,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l1.3-2.6 L10.1,14.2z"/>\n        <path d="M25.5,27.5l-25-25C-0.1,2-0.1,1,0.5,0.4l0,0C1-0.1,2-0.1,2.6,0.4l25,25c0.6,0.6,0.6,1.5\n        ,0,2.1l0,0 C27,28.1,26,28.1,25.5,27.5z"/>\n    </svg>'},a=n.generateCSS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,r=e.height,i=e.background?e.background:e.color,s=e.cssprefix;return"\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/31P4mP32i98D9CEnGyeX9Q.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\n    }\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/Zi_e6rBgGqv33BWF8WTq8g.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, \n                       U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;\n    }\n\n    button."+s+"-button {\n        font-family: 'Karla', sans-serif;\n\n        border: "+i+" 2px solid;\n        border-radius: "+(t="round"==e.corners?e.height/2:"square"==e.corners?2:e.corners)+"px;\n        box-sizing: border-box;\n        background: "+(e.background?e.background:"none")+";\n\n        height: "+r+"px;\n        min-width: "+9.6*n+"px;\n        display: inline-block;\n        position: relative;\n\n        cursor: pointer;\n    }\n    \n    button."+s+"-button:focus {\n      outline: none;\n    }\n\n    /*\n    * Logo\n    */\n\n    ."+s+"-logo {\n        width: "+r+"px;\n        height: "+r+"px;\n        position: absolute;\n        top:0px;\n        left:0px;\n        width: "+(r-4)+"px;\n        height: "+(r-4)+"px;\n    }\n    ."+s+"-svg {\n        fill: "+e.color+";\n        margin-top: "+((r-.8*n)/2-2)+"px;\n        margin-left: "+r/3+"px;\n    }\n    ."+s+"-svg-error {\n        fill: "+e.color+";\n        display:none;\n        margin-top: "+((r-28/18*n*.8)/2-2)+"px;\n        margin-left: "+r/3+"px;\n    }\n\n\n    /*\n    * Title\n    */\n\n    ."+s+"-title {\n        color: "+e.color+";\n        position: relative;\n        font-size: "+n+"px;\n        padding-left: "+1.05*r+"px;\n        padding-right: "+(t-10<5?r/3:t-10)+"px;\n    }\n\n    /*\n    * disabled\n    */\n\n    button."+s+"-button[disabled=true] {\n        opacity: "+e.disabledOpacity+";\n        cursor: default;\n    }\n\n    button."+s+"-button[disabled=true] > ."+s+"-logo > ."+s+"-svg {\n        display:none;\n    }\n\n    button."+s+"-button[disabled=true] > ."+s+"-logo > ."+s+"-svg-error {\n        display:initial;\n    }\n  "}},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r(e("./webvr-manager")),o=e("./dom"),a=r(e("./states")),l=r(e("eventemitter3")),u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return(n=n||{}).color=n.color||"rgb(80,168,252)",n.background=n.background||!1,n.disabledOpacity=n.disabledOpacity||.5,n.height=n.height||55,n.corners=n.corners||"square",n.cssprefix=n.cssprefix||"webvr-ui",n.textEnterVRTitle=n.textEnterVRTitle||"ENTER VR",n.textVRNotFoundTitle=n.textVRNotFoundTitle||"VR NOT FOUND",n.textExitVRTitle=n.textExitVRTitle||"EXIT VR",n.onRequestStateChange=n.onRequestStateChange||function(){return!0},n.beforeEnter=n.beforeEnter||void 0,n.beforeExit=n.beforeExit||function(){return new Promise(function(e){return e()})},n.injectCSS=!1!==n.injectCSS,r.options=n,r.sourceCanvas=e,r.domElement=n.domElement||(0,o.createDefaultView)(n),r.__defaultDisplayStyle=r.domElement.style.display||"initial",r.manager=new s.default,r.manager.checkDisplays(),r.manager.addListener("change",function(e){return r.__onStateChange(e)}),r.domElement.addEventListener("click",function(){return r.__onEnterVRClick()}),r.__forceDisabled=!1,r.setTitle(r.options.textEnterVRTitle),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"setTitle",value:function(e){return this.domElement.title=e,c(this.domElement,this.options.cssprefix,"title",function(t){e?(t.innerText=e,t.style.display="initial"):t.style.display="none"}),this}},{key:"setTooltip",value:function(e){return this.domElement.title=e,this}},{key:"show",value:function(){return this.domElement.style.display=this.__defaultDisplayStyle,this.emit("show"),this}},{key:"hide",value:function(){return this.domElement.style.display="none",this.emit("hide"),this}},{key:"enable",value:function(){return this.__setDisabledAttribute(!1),this.__forceDisabled=!1,this}},{key:"disable",value:function(){return this.__setDisabledAttribute(!0),this.__forceDisabled=!0,this}},{key:"remove",value:function(){this.manager.remove(),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement)}},{key:"getVRDisplay",value:function(){return s.default.getVRDisplay()}},{key:"isPresenting",value:function(){return this.state===a.default.PRESENTING||this.state==a.default.PRESENTING_FULLSCREEN}},{key:"requestEnterVR",value:function(){var e=this;return new Promise(function(t,n){if(e.options.onRequestStateChange(a.default.PRESENTING))return e.options.beforeEnter?e.options.beforeEnter().then(function(){return e.manager.enterVR(e.manager.defaultDisplay,e.sourceCanvas)}).then(t):e.manager.enterVR(e.manager.defaultDisplay,e.sourceCanvas).then(t);n(new Error(a.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestExit",value:function(){var e=this,t=this.state;return new Promise(function(n,r){if(e.options.onRequestStateChange(a.default.READY_TO_PRESENT))return e.options.beforeExit().then(function(){return t===a.default.PRESENTING?e.manager.exitVR(e.manager.defaultDisplay):e.manager.exitFullscreen()}).then(n);r(new Error(a.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestEnterFullscreen",value:function(){var e=this;return new Promise(function(t,n){if(e.options.onRequestStateChange(a.default.PRESENTING_FULLSCREEN))return e.options.beforeEnter?e.options.beforeEnter().then(function(){return e.manager.enterFullscreen(e.sourceCanvas)}).then(t):e.manager.enterFullscreen(e.sourceCanvas).then(t);n(new Error(a.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"__setDisabledAttribute",value:function(e){e||this.__forceDisabled?this.domElement.setAttribute("disabled","true"):this.domElement.removeAttribute("disabled")}},{key:"__onEnterVRClick",value:function(){this.state==a.default.READY_TO_PRESENT?this.requestEnterVR():this.isPresenting()&&this.requestExit()}},{key:"__onStateChange",value:function(e){if(e!=this.state)switch(this.state!==a.default.PRESENTING&&this.state!==a.default.PRESENTING_FULLSCREEN||this.emit("exit",this.manager.defaultDisplay),this.state=e,e){case a.default.READY_TO_PRESENT:this.show(),this.setTitle(this.options.textEnterVRTitle),this.manager.defaultDisplay&&this.setTooltip("Enter VR using "+this.manager.defaultDisplay.displayName),this.__setDisabledAttribute(!1),this.emit("ready",this.manager.defaultDisplay);break;case a.default.PRESENTING:case a.default.PRESENTING_FULLSCREEN:this.manager.defaultDisplay&&this.manager.defaultDisplay.capabilities.hasExternalDisplay&&e!=a.default.PRESENTING_FULLSCREEN||this.hide(),this.setTitle(this.options.textExitVRTitle),this.__setDisabledAttribute(!1),this.emit("enter",this.manager.defaultDisplay);break;case a.default.ERROR_BROWSER_NOT_SUPPORTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Browser not supported"),this.__setDisabledAttribute(!0),this.emit("error",new Error(e));break;case a.default.ERROR_NO_PRESENTABLE_DISPLAYS:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("No VR headset found."),this.__setDisabledAttribute(!0),this.emit("error",new Error(e));break;case a.default.ERROR_REQUEST_TO_PRESENT_REJECTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Something went wrong trying to start presenting to your headset."),this.__setDisabledAttribute(!0),this.emit("error",new Error(e));break;case a.default.ERROR_EXIT_PRESENT_REJECTED:default:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Unknown error."),this.__setDisabledAttribute(!0),this.emit("error",new Error(e))}}}]),t}();n.default=u;var c=function(e,t,n,r){var i=e.querySelector("."+t+"-"+n);i&&r(i)}},{"./dom":4,"./states":7,"./webvr-manager":8,eventemitter3:1}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.WebVRManager=n.State=n.dom=n.EnterVRButton=void 0;var i=r(e("./webvr-manager")),s=r(e("./states")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./dom")),a=r(e("./enter-vr-button"));e("./aframe-component"),n.EnterVRButton=a.default,n.dom=o,n.State=s.default,n.WebVRManager=i.default},{"./aframe-component":3,"./dom":4,"./enter-vr-button":5,"./states":7,"./webvr-manager":8}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={READY_TO_PRESENT:"ready",PRESENTING:"presenting",PRESENTING_FULLSCREEN:"presenting-fullscreen",PREPARING:"preparing",ERROR_NO_PRESENTABLE_DISPLAYS:"error-no-presentable-displays",ERROR_BROWSER_NOT_SUPPORTED:"error-browser-not-supported",ERROR_REQUEST_TO_PRESENT_REJECTED:"error-request-to-present-rejected",ERROR_EXIT_PRESENT_REJECTED:"error-exit-present-rejected",ERROR_REQUEST_STATE_CHANGE_REJECTED:"error-request-state-change-rejected",ERROR_UNKOWN:"error-unkown"}},{}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r(e("./states")),o=r(e("eventemitter3")),a=r(e("screenfull")),l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=s.default.PREPARING,e.__onVRDisplayPresentChange=e.__onVRDisplayPresentChange.bind(e),window.addEventListener("vrdisplaypresentchange",e.__onVRDisplayPresentChange),e.__onChangeFullscreen=e.__onChangeFullscreen.bind(e),a.default.enabled&&document.addEventListener(a.default.raw.fullscreenchange,e.__onChangeFullscreen),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"checkDisplays",value:function(){var e=this;return t.getVRDisplay().then(function(t){return e.defaultDisplay=t,e.__setState(s.default.READY_TO_PRESENT),t}).catch(function(t){delete e.defaultDisplay,"NO_DISPLAYS"==t.name?e.__setState(s.default.ERROR_NO_PRESENTABLE_DISPLAYS):"WEBVR_UNSUPPORTED"==t.name?e.__setState(s.default.ERROR_BROWSER_NOT_SUPPORTED):e.__setState(s.default.ERROR_UNKOWN)})}},{key:"remove",value:function(){window.removeEventListener("vrdisplaypresentchange",this.__onVRDisplayPresentChange),a.default.enabled&&document.removeEventListener(a.default.raw.fullscreenchanged,this.__onChangeFullscreen),this.removeAllListeners()}},{key:"enterVR",value:function(e,t){var n=this;return this.presentedSource=t,e.requestPresent([{source:t}]).then(function(){},function(){return n.__setState(s.default.ERROR_REQUEST_TO_PRESENT_REJECTED)})}},{key:"exitVR",value:function(e){var t=this;return e.exitPresent().then(function(){t.presentedSource=void 0},function(){return t.__setState(s.default.ERROR_EXIT_PRESENT_REJECTED)})}},{key:"enterFullscreen",value:function(e){return a.default.enabled?a.default.request(e):this.__setState(s.default.PRESENTING_FULLSCREEN),!0}},{key:"exitFullscreen",value:function(){return a.default.enabled&&a.default.isFullscreen?a.default.exit():this.state==s.default.PRESENTING_FULLSCREEN&&this.checkDisplays(),!0}},{key:"__setState",value:function(e){e!=this.state&&(this.emit("change",e,this.state),this.state=e)}},{key:"__onChangeFullscreen",value:function(e){a.default.isFullscreen?this.state!=s.default.PRESENTING&&this.__setState(s.default.PRESENTING_FULLSCREEN):this.checkDisplays()}},{key:"__onVRDisplayPresentChange",value:function(e){try{var t=void 0;if(e.display?t=e.display:e.detail&&e.detail.display&&(t=e.detail.display),t&&t.isPresenting&&t.getLayers()[0].source!==this.presentedSource)return;var n=this.defaultDisplay&&this.defaultDisplay.isPresenting;this.__setState(n?s.default.PRESENTING:s.default.READY_TO_PRESENT)}catch(e){}}}],[{key:"getVRDisplay",value:function(){return new Promise(function(e,t){if(!navigator||!navigator.getVRDisplays){var n=new Error("Browser not supporting WebVR");return n.name="WEBVR_UNSUPPORTED",void t(n)}var r=function(){var e=new Error("No displays found");e.name="NO_DISPLAYS",t(e)};navigator.getVRDisplays().then(function(t){for(var n=0;n<t.length;n++)if(t[n].capabilities.canPresent){e(t[n]);break}r()},r)})}}]),t}();n.default=l},{"./states":7,eventemitter3:1,screenfull:2}]},{},[6])(6)});